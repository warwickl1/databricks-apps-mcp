# This contains all the information for deploying a Databricks Asset Bundle.

bundle:
  name: example # Rename this to your project name

artifacts:
  # Build the project as a Python whl so it can be installed on the cluster.
  default:
    type: whl
    build: pip install build && python -m build

variables:
  # Jobs must have this passed in
  cluster_policy_id:
    description: The cluster policy ID to use for the cluster
    default: cluster-policy-id-not-set
  dbx_catalog:  # Example variable: which catalog to write to?
    description: The catalog we want to write our table to 
    default: sandbox
  dbx_schema:   # Example variable: which schema to write to?
    description: The schema we want to write our table to
    default: data_science

include:
  - resources/*.yml  # Include all files in the resources directory

targets:
  sandbox:
    default: true  # Use this if no target is specified
    workspace:
      host: https://cirium-data-workspace-dev.cloud.databricks.com  # Where to deploy the bundle
    # Here we can pass in variables that will be used in the job
    variables:
      dbx_catalog: sandbox      # Example variable
      dbx_schema: data_science  # Example variable
      cluster_policy_id: 001F979AFCBF38F9  # data-science-job

  dev:
    workspace:
      host: https://cirium-data-workspace-dev.cloud.databricks.com
    variables:
      dbx_catalog: dbx_dev      # Example variable
      dbx_schema: data_science  # Example variable

  test:
    workspace: 
      host: https://cirium-data-workspace-staging.cloud.databricks.com
    variables:
      dbx_catalog: dbx_staging  # Example variable

  staging:
    workspace:
      host: https://cirium-data-workspace-staging.cloud.databricks.com
    variables:
      dbx_catalog: dbx_staging  # Example variable

  prod:
    workspace:
      host: https://cirium-data-workspace-prod.cloud.databricks.com
    variables:
      dbx_catalog: dbx          # Example variable
      dbx_schema: test          # Example variable